{% extends "base.html" %}
{% block title %}Home Page{% endblock %}
{% block content %}
<style>
    .rectangle-box {
        border: 1px solid #9248f2;
        padding: 20px;
        background-color: #ffffff;
        width: 700px;
        text-align: center;
    }


    /* Added styles for the animated progress bar */
    .progress {
        height: 20px;
        margin-top: 20px;
    }

    .progress-bar {
        animation: progress-bar-stripes 1s linear infinite;
    }

    @keyframes progress-bar-stripes {
        from {
            background-position: 1rem 0;
        }
        to {
            background-position: 0 0;
        }
    }

</style>


<!-- <div class="container mt-4">
    <div class="row justify-content-center">
        <div id="carouselExample" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="static\images\banner02.jpg" alt="Image 1" width="800" height="400">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>Caption for Image 1</h5>
                        <p>This is the caption for the first image.</p>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="static\images\banner02.jpg" alt="Image 2" width="800" height="400">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>Caption for Image 2</h5>
                        <p>This is the caption for the second image.</p>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="static\images\banner02.jpg" alt="Image 3" width="800" height="400">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>Caption for Image 3</h5>
                        <p>This is the caption for the third image.</p>
                    </div>
                </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExample" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExample" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>
</div>  -->

<div class="container mt-4">
    <div class="row justify-content-center">
        <div id="carouselExample" class="carousel slide" data-ride="carousel">

<div class="carousel-inner">
    {% for paper in trending_papers %}
    <div class="carousel-item {% if forloop.first %}active{% endif %}">
        <img src="static/images/banner02.jpg" alt="Paper Image" width="800" height="400">
        <div class="carousel-caption d-none d-md-block">
            <h5>{{ paper.title }}</h5>
            <p>{{ paper.summary }}</p>
            <a href="{{ paper.url }}" class="btn btn-primary" target="_blank">Read More</a>
        </div>
    </div>
    {% endfor %}
</div>


            <a class="carousel-control-prev" href="#carouselExample" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExample" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>
</div> 





<br><br>

<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="rectangle-box">
            <form method="post" action="{% url 'search_papers' %}">
                <div class="form-group mx-sm-3">
                    <h1>Enter Your Query</h1>
                    {% csrf_token %}
                    <input type="text" name="query" class="form-control" id="searchInput" placeholder="Search something..." style="width: 500px;">
                </div>
                <button type="submit" class="btn btn-dark">Search</button>
            </form>

            <!-- Animated progress bar -->
            <div class="progress">
                <div class="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0;"></div>
            </div>
        </div>
    </div>
</div>

<div class="row justify-content-center mt-4" id="recommendations">
    <!-- Recommended papers will be displayed here -->
</div>

<script>
    // JavaScript function to show/hide the progress bar
    function toggleProgressBar(show) {
        const progressBar = document.querySelector('.progress');
        progressBar.style.display = show ? 'block' : 'none';
    }
</script>


<script>
    // Use template tag to convert Python list to JavaScript array
    const recommendedPapers = [
        {% for paper in recommended_papers %}
            "{{ paper.title }}",
        {% endfor %}
    ];

    // Hide the progress bar if recommendations are available
    if (recommendedPapers.length > 0) {
        toggleProgressBar(false); // Hide the progress bar
    }
</script>


{% endblock %}